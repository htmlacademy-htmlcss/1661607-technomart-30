const buttonCart=document.querySelector(".button-cart"),buyNum=buttonCart.querySelector(".button-cart-num"),buttonBookmark=document.querySelector(".button-bookmark"),bookmarkNum=buttonBookmark.querySelector(".button-bookmark-num");let counterBuy=0,counterBookmark=0;const scrollWidth=getScrollWidth(),dots=document.querySelectorAll(".slider-dot-item"),arrowLeft=document.querySelector(".slider-arrow-left"),arrowRight=document.querySelector(".slider-arrow-right"),promoSlide=document.querySelector(".promo-slide-img"),sliderHeaderCurent=document.querySelector(".promo-slide-name"),sliderTextCurent=document.querySelector(".promo-slide-description"),sliderImgSrc=["img/slides/slide-perforator.jpg","img/slides/slide-drill.jpg"],sliderHeaders=["ПЕРФОРАТОРЫ","ДРЕЛИ"],sliderTexts=["Настоящие мужские игрушки","Соседям на радость!"],slideAlt=["Слайд: Перфоратор Бош","Слайд: Дрель Бош"];let slideId=0;const changeSlide=e=>{dots.forEach(e=>{e.classList.remove("slider-dot-active")}),dots[e].classList.add("slider-dot-active"),promoSlide.setAttribute("src",sliderImgSrc[e]),promoSlide.setAttribute("alt",slideAlt[e]),sliderHeaderCurent.textContent=sliderHeaders[e],sliderTextCurent.textContent=sliderTexts[e]};arrowRight&&arrowLeft&&dots&&(arrowRight.addEventListener("click",()=>{slideId<sliderImgSrc.length-1?slideId++:slideId=0,changeSlide(slideId)}),arrowLeft.addEventListener("click",()=>{slideId>0?slideId--:slideId=sliderImgSrc.length-1,changeSlide(slideId)}),dots.forEach((e,t)=>{e.addEventListener("click",o=>{o.target==e&&changeSlide(t)})}));const srviceTexts=["Мы с удовольствием доставим ваш товар прямо <br />к вашему подъезду совершенно бесплатно!<br />Ведь мы неплохо заработаем, <br />поднимая его на ваш этаж!","Если купленный у нас товар поломается или заискрит, а также в случае пожара, спровоцированного его возгоранием, вы всегда можете быть уверены в нашей гарантии. Мы обменяем сгоревший товар на новый. Дом уж восстановите как-нибудь сами.","Залезть в долговую яму стало проще! <br />Кредитные консультанты придут вам на помощь."],srviceImgClases=["service-img-truck","service-img-garant","service-img-credit"],services=document.querySelectorAll(".services-item"),headerService=document.querySelector(".service-description h3"),textService=document.querySelector(".service-description p"),serviceImg=document.querySelector(".service-img"),buttonCredit=document.querySelector(".services-credit-button"),allDisactivate=()=>{services.forEach(e=>{e.classList.remove("services-item-active"),e.classList.add("services-item-disactive")})};function openModal(e,t){t.addEventListener("click",o=>{o.preventDefault(),e.parentNode.style.display="flex",e.classList.add("open-animation"),setTimeout(()=>e.classList.remove("open-animation"),500),document.body.style.overflow="hidden",document.body.style.marginRight=`${scrollWidth}px`;const r=e.querySelector("[name=name]");r&&letterSender(e,r),t.classList.contains("buy-prod")&&(counterBuy++,buyNum.textContent=counterBuy,buttonCart.classList.add("header-something-inside"))})}function closeModal(e,t){function o(){e.parentNode.style.display="none",document.body.style.overflow="",document.body.style.marginRight=0}t.addEventListener("click",()=>{o()}),window.addEventListener("keydown",e=>{27==e.keyCode&&o()})}function letterSender(e,t){const o=e.querySelector(".login-email"),r=e.querySelector(".login-letter"),l=e.querySelector("form"),d=e.querySelector(".login-button");localStorage.getItem("name")&&(t.value=localStorage.getItem("name")),localStorage.getItem("mail")&&(o.value=localStorage.getItem("mail")),t.value?o.value?r.focus():o.focus():t.focus(),l.addEventListener("submit",l=>{t.value&&localStorage.setItem("name",t.value),o.value&&localStorage.setItem("mail",o.value),t.value&&o.value&&r.value||(l.preventDefault(),d.style.backgroundColor="white",d.innerHTML='<p class="header-text">заполните все поля</p>',e.classList.add("error-animation"),setTimeout(()=>e.classList.remove("error-animation"),100),setTimeout(()=>{d.style.backgroundColor="#EE3643",d.textContent="ОТПРАВИТЬ"},1500))})}function getScrollWidth(){const e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",document.body.appendChild(e);const t=e.offsetWidth-e.clientWidth;return e.remove(),t}services.forEach((e,t)=>{e.addEventListener("click",()=>{services.forEach(e=>{e.classList.remove("services-item-active"),e.classList.add("services-item-disactive")}),e.classList.remove("services-item-disactive"),e.classList.add("services-item-active"),headerService.textContent=e.textContent,textService.innerHTML=srviceTexts[t],srviceImgClases.forEach(e=>serviceImg.classList.remove(e)),serviceImg.classList.add(srviceImgClases[t]),"Кредит"===e.textContent?buttonCredit.style.display="block":buttonCredit.style.display="none"})});const writeUs=document.getElementById("write-us");if(writeUs){const e=document.querySelector(".modal-login"),t=e.querySelector(".modal-close");openModal(e,writeUs),closeModal(e,t)}const modalMap=document.querySelector(".modal-map");if(modalMap){const e=document.querySelector(".company-location-img"),t=modalMap.querySelector(".modal-close");openModal(modalMap,e),closeModal(modalMap,t)}const modalAdded=document.querySelector(".modal-added"),closeModalAdded=modalAdded.querySelector(".modal-close"),closeModalAdded2=modalAdded.querySelector(".button-buy"),closeModalAdded3=modalAdded.querySelector(".modal-button-continue"),bookmarkProds=document.querySelectorAll(".bookmark-prod");bookmarkProds.forEach(e=>{e.addEventListener("click",()=>{counterBookmark++,bookmarkNum.textContent=counterBookmark,buttonBookmark.classList.add("header-something-inside")})});const addedButtons=document.querySelectorAll(".buy-prod");addedButtons.forEach(e=>{openModal(modalAdded,e),closeModal(modalAdded,closeModalAdded),closeModal(modalAdded,closeModalAdded2),closeModal(modalAdded,closeModalAdded3)});const rangeBlock=document.querySelector(".range"),MAX_PRICE=35e3,BAR_WIDTH=180,TOGGLE_ZERO=18;if(rangeBlock){const e=rangeBlock.querySelector(".scale .bar"),t=rangeBlock.querySelector(".toggle-max"),o=rangeBlock.querySelector(".toggle-min"),r=rangeBlock.querySelectorAll(".price-controls input");r.forEach(l=>{l.addEventListener("input",()=>{l.value=l.value.replace(/\D/g,""),l.value>35e3&&(l.value=35e3);const d=+r[1].value/35e3*100,s=+r[1].value/35e3*180,c=+r[0].value/35e3*100,i=+r[0].value/35e3*180;t.style.left=18+s+"px",e.style.width=d-c+"%",o.style.left=18+i+"px",e.style.marginLeft=c/100*180+"px"})})}